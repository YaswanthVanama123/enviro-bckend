# ============================================================================
# ENVIRONMENT & SERVER CONFIGURATION
# ============================================================================
NODE_ENV=production
# Digital Ocean will use default port 5000 (configure Nginx reverse proxy)
PORT=5000

# ⚠️ DIGITAL OCEAN: Update this with your server IP or domain
# Example: http://your-droplet-ip:5000 OR https://api.enviromasternva.com (with Nginx SSL)
SERVER_URL=http://YOUR_DROPLET_IP:5000

# ============================================================================
# DATABASE CONFIGURATION (MongoDB Atlas)
# ============================================================================
MONGO_URI=mongodb+srv://vanamayaswanth1_db_user:NzvLPS9c2KO02tDz@cluster0.f1kzy9b.mongodb.net/enviro_master?retryWrites=true&w=majority
MONGO_DB=enviro_master

# ============================================================================
# PDF SERVICE CONFIGURATION
# ============================================================================
# ⚠️ IMPORTANT: Do NOT include /pdf at the end! The code adds the path automatically.
# CORRECT: http://142.93.213.187:3000
# WRONG: http://142.93.213.187:3000/pdf (causes double /pdf/pdf/ in URL)
PDF_REMOTE_BASE=http://142.93.213.187:3000
PDF_MAX_BODY_MB=5
PDF_REMOTE_TIMEOUT_MS=90000

# ============================================================================
# ZOHO BIGIN INTEGRATION
# ============================================================================
# Client credentials from Zoho API Console
ZOHO_CLIENT_ID=1000.1EZQQI578R0FF0D892H8LFWROMYNQV
ZOHO_CLIENT_SECRET=75063a1499cfcff533a773b84eb6feb63948165d71

# Zoho India data center URLs
ZOHO_ACCOUNTS_URL=https://accounts.zoho.in
ZOHO_BIGIN_API_URL=https://www.zohoapis.in/bigin/v2
ZOHO_CRM_API_URL=https://www.zohoapis.in/crm/v3

# ⚠️ DIGITAL OCEAN: Update this with your server URL
# Example: http://your-droplet-ip:5000/oauth/callback OR https://api.enviromasternva.com/oauth/callback
# This MUST match the redirect URI in Zoho API Console
ZOHO_REDIRECT_URI=http://YOUR_DROPLET_IP:5000/oauth/callback

# Zoho refresh token (will be regenerated after OAuth flow on production)
# Current token is for development - regenerate in production by visiting:
# https://your-app-name.onrender.com/oauth/zoho/auth
ZOHO_REFRESH_TOKEN=1000.8d0321c0d20a3ad9510702f16f4ed005.2b87fb7ed88fa12be4df88e02548c16b

# ============================================================================
# EMAIL CONFIGURATION (SMTP)
# ============================================================================
EMAIL_HOST=enviromasternva.com
EMAIL_PORT=465
EMAIL_SECURE=true
EMAIL_USER=hvanama@enviromasternva.com
EMAIL_PASSWORD=Satyavani@123
EMAIL_FROM_NAME=EnviroMaster NVA
EMAIL_FROM_ADDRESS=hvanama@enviromasternva.com

# ============================================================================
# SECURITY & AUTHENTICATION
# ============================================================================
# JWT Secret - Strong random string for token signing
JWT_SECRET=ecb3d1020938632c45709d08c96f478f9887e93e42395e1fd9be81c0eac72d00e00c0b78ba29691304cd14eaee41edeecd55218463f27e7217a25e891e14fe2a
JWT_EXPIRES_IN=7d

# ============================================================================
# CORS CONFIGURATION
# ============================================================================
# ⚠️ DIGITAL OCEAN: Update this with your frontend URLs
# Production frontend: https://enviromasternva.com
# Multiple origins separated by comma
# For local development, also include: http://localhost:5173,http://localhost:3000
ALLOWED_ORIGINS=https://enviromasternva.com,http://localhost:5173,http://localhost:3000

# ============================================================================
# LOGGING & MONITORING
# ============================================================================
LOG_LEVEL=info

# ============================================================================
# DEPLOYMENT NOTES - Digital Ocean Deployment
# ============================================================================
#
# BEFORE DEPLOYING TO DIGITAL OCEAN:
# 1. ✅ MongoDB Atlas - Already configured correctly
# 2. ✅ Email credentials - Already configured correctly
# 3. ✅ Zoho credentials - Already configured correctly
# 4. ✅ JWT_SECRET - Already generated (strong 128-char secret)
# 5. ⚠️ SERVER_URL - UPDATE with your droplet IP or domain
# 6. ⚠️ ZOHO_REDIRECT_URI - UPDATE to match your server URL
# 7. ✅ ALLOWED_ORIGINS - Set to https://enviromasternva.com (your frontend)
#
# DIGITAL OCEAN DEPLOYMENT STEPS:
# 1. Create Ubuntu droplet (recommended: 2GB RAM, $12/month)
# 2. SSH into droplet: ssh root@your-droplet-ip
# 3. Install Node.js 18 or 20:
#    curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
#    sudo apt-get install -y nodejs
# 4. Install PM2 (process manager):
#    sudo npm install -g pm2
# 5. Upload backend code to: /var/www/enviro-backend/
# 6. Install dependencies:
#    cd /var/www/enviro-backend
#    npm install --production
# 7. Copy this .env file to server and update:
#    - SERVER_URL with your droplet IP
#    - ZOHO_REDIRECT_URI with your droplet IP
# 8. Start app with PM2:
#    pm2 start server.js --name enviro-backend
#    pm2 save
#    pm2 startup
# 9. Configure Nginx reverse proxy (optional but recommended):
#    - See DIGITAL_OCEAN_DEPLOYMENT.md for full guide
# 10. Update Zoho API Console redirect URI to match production URL
# 11. Regenerate ZOHO_REFRESH_TOKEN by visiting:
#     http://your-droplet-ip:5000/oauth/zoho/auth
#
# ============================================================================
